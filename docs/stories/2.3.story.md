# Story 2.3: Farm Dashboard (Listing)

**Epic:** Frontend Application (Next.js)

## Status
Completed

## Story
**As a** User,
**I want** to see a list of all wind farms on a dashboard,
**so that** I can get an overview of the assets I manage.

---

## Acceptance Criteria

1. **AC1:** A new "Farms" page (or dashboard section) displays a list of farms fetched from the `GET /farms` API endpoint.
2. **AC2:** The farm list is displayed in a responsive table or grid format.
3. **AC3:** Each farm entry shows its Code, Project name, SPV, and Type (Wind/Solar/Hybrid).
4. **AC4:** The UI handles loading states while fetching data.
5. **AC5:** The UI handles error states if the API request fails.
6. **AC6:** Clicking on a farm in the list navigates the user to a detailed view of that farm (Placeholder for now).
7. **AC7:** Only authenticated users can access the Farms list.

---

## Tasks / Subtasks

- [x] **Task 1: Create Farms Page and Layout** (AC1, AC7)
  - [x] Create `frontend/src/app/farms/page.tsx`
  - [x] Implement basic access control (redirect to home if not logged in)

- [x] **Task 2: Implement Farm Fetching Logic** (AC1, AC4, AC5)
  - [x] Use the `api` utility to fetch farms from `/farms`
  - [x] Manage loading and error states using React `useState` and `useEffect`

- [x] **Task 3: Build Farm List UI** (AC2, AC3)
  - [x] Create manual Shadcn-like `table` and `badge` components (due to environment restrictions)
  - [x] Render farm data in the table

- [x] **Task 4: Add Navigation to Details** (AC6)
  - [x] Add "View" links for each farm
  - [x] Implement navigation to `/farms/[uuid]`

---

## Dev Notes

### UI Components
- Manually implemented `Table` and `Badge` components in `frontend/src/components/ui/` to bypass `npx shadcn-ui` blocks.
- Used Tailwind CSS for styling to match the project's aesthetic.

### Authentication
- Added client-side protection to `/farms` page to ensure only authenticated users see the content.

---

## Testing

- **Manual Verification**: 
  - Logged in and navigated to `/farms`.
  - Verified that the table correctly displays data fetched from the backend.
  - Verified that clicking "View" navigates to the (currently empty) detail page.
  - Verified that accessing `/farms` while logged out displays an "Access Denied" message.

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-02-05 | 1.0 | Initial story creation | Dev Agent |
| 2026-02-05 | 1.1 | Implementation completed and verified | Dev Agent |

---

## Dev Agent Record

### Agent Model Used
Gemini 2.0 Flash

### File List
- `frontend/src/components/ui/badge.tsx`
- `frontend/src/components/ui/table.tsx`
- `frontend/src/app/farms/page.tsx`
- `frontend/src/app/page.tsx` (updated)
- `docs/stories/2.3.story.md`